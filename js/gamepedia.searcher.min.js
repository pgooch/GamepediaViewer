importScripts("../gamepedia.settings.js"),onmessage=function(e){var a=indexedDB.open("gamepedia");a.onerror=function(){postMessage('<li class="notice error">There was an error loading the database.</li>')},a.onblocked=function(){postMessage('<li class="notice error">Database access blocked.</li>')},a.onsuccess=function(a){var s=a.target.result;try{var t=s.transaction(["games"],"readonly"),o=t.objectStore("games"),r=o.index("title"),l=r.openCursor(),n=JSON.parse(e.data),i="";l.onsuccess=function(e){var a=e.target.result;if(null!=a){var t=a.value,o=!0;if("A"==n.entry_type?2==t.ZSTATUS&&(o=!1):t.ZSTATUS!=n.entry_type&&(o=!1),""!=n.platform&&o&&t.ZPLATFORM!=n.platform&&(o=!1),o&&t.ZTITLE.toLowerCase().indexOf(n.search.toLowerCase())<0&&(o=!1),o){if(_useDoghouse&&null!=t.ZDOGTAG)var r="http://doghouse.bruji.com/game/"+t.ZDOGTAG,l='target="_blank"';else var r="#"+t.ZUID+"-"+t.ZTITLE.toLowerCase().replace(/[^a-z0-9 ]+/g,"").replace(/ +/g,"-"),l="";i+='<li id="'+t.ZUID+'">',i+='<a href="'+r+'" '+l+">",i+=t.ZTITLE,null!=t.ZEDITION&&(i+=" <i>"+t.ZEDITION+"</i> "),""==n.platform&&(i+=" <small>for "+t.ZPLATFORM+"</small>"),i+="</a>",i+="</li>"}a.continue()}else""==i&&(i='<li class="notice no-results">No Titles match your current filters.</li>'),postMessage(i),s.close()}}catch(a){postMessage('<li class="notice error">Unable to search database. This is most likely because one can not be found or it is damaged. Please delete and re-import the database with the buttons in the "Database Settings" area below.</li>'),console.log(a)}}};
//# sourceMappingURL=./gamepedia.searcher.min.map